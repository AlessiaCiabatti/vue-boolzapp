<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">

  <!-- Vue -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
  <title>Document</title>
</head>

<body class="">
  
  <section id="app" class="whatsapp">
    <div class="container">
      <div class="row d-flex">

        <!-- colonna piccola -->
        <div class="col small d-flex">

          <div class="top">
            <div class="my-info d-flex">
                <img src="assets/img/avatar_io.jpg" alt="">
              <div class="icons d-none">
                <button>
                  <i class="fa-regular fa-sun"></i>
                  <i class="fa-solid fa-moon"></i>
                </button>
                <i class="fa-solid fa-arrows-rotate"></i>
                <i class="fa-solid fa-message"></i>
                <i class="fa-solid fa-ellipsis-vertical"></i>
              </div>
            </div>

            <div class="notification d-flex d-none">
                <div class="bell d-flex">
                  <i class="fa-solid fa-bell-slash d-flex"></i>
                </div>
                <div class="get d-flex">
                  <p>Ricevi notifiche di nuovi messaggi</p>
                  <a href="#">Attiva notifiche desktop</a>
                </div>
            </div>
          </div>
                        
          <div class="research d-none d-flex">
            <div class="white d-flex">
              <!-- 4 -->
              <input type="text" placeholder="Cerca o inizia una nuova chat"
              v-model="contactToSearch">
              <i class="fa-solid fa-magnifying-glass"></i>
            </div>
          </div>

          <div class="bottom">

            <!-- CONTATTI -->

            <!-- 1 v-for -->
            <!-- 2 -->
            <!-- 4 -->
            <div 
            v-for="(contact, index) in ricercaUtenti"
            class="info-contacts d-flex"
            @click="attivareUtente(index)">
            <!-- sto dicendo a Vue di cercare le immagini nella cartella chiamata "img", + seguito dal numero dell'avatar (determinato dall'indice del ciclo v-for incrementato di 1 + l'estensione ".jpg" -->
              <img :src="'img/avatar_' + (index + 1) + '.jpg'" alt="">
              <div class="name-contacts d-none d-flex">
                <h4>{{contact.name}}</h4>
                <p>{{contact.messages[contact.messages.length-1].message}}</p>
              </div>
              <p class="time d-none">{{contact.messages[contact.messages.length-1].date}}</p>
            </div>

            <!-- <div class="info-contacts d-flex">
              <img src="assets/img/avatar_3.jpg" alt="">
              <div class="name-contacts d-none d-flex">
                <h4>Samuele</h4>
                <p>Lorem ipsum dolor sit amet</p>
              </div>
              <p class="time d-none">16.03</p>
            </div>


            <div class="info-contacts d-flex">
              <img src="assets/img/avatar_4.jpg" alt="">
              <div class="name-contacts d-none d-flex">
                <h4>Alessandro B.</h4>
                <p>Lorem ipsum dolor sit amet</p>
              </div>
              <p class="time d-none">15.50</p>
            </div>


            <div class="info-contacts d-flex">
              <img src="assets/img/avatar_5.jpg" alt="">
              <div class="name-contacts d-none d-flex">
                <h4>Alessandro L.</h4>
                <p>Lorem ipsum dolor sit amet</p>
              </div>
              <p class="time d-none">15.45</p>
            </div>


            <div class="info-contacts d-flex">
              <img src="assets/img/avatar_6.jpg" alt="">
              <div class="name-contacts d-none d-flex">
                <h4>Claudia</h4>
                <p>Lorem ipsum dolor sit amet</p>
              </div>
              <p class="time d-none">15.40</p>
            </div>


            <div class="info-contacts d-flex">
              <img src="assets/img/avatar_7.jpg" alt="">
              <div class="name-contacts d-none d-flex">
                <h4>Federico</h4>
                <p>Lorem ipsum dolor sit amet</p>
              </div>
              <p class="time d-none">15.22</p>
            </div>


            <div class="info-contacts d-flex">
              <img src="assets/img/avatar_8.jpg" alt="">
              <div class="name-contacts d-none d-flex">
                <h4>Davide</h4>
                <p>Lorem ipsum dolor sit amet</p>
              </div>
              <p class="time d-none">15.15</p>
            </div>

            <div class="info-contacts d-flex">
              <img src="assets/img/avatar_2.jpg" alt="">
              <div class="name-contacts d-none d-flex">
                <h4>Fabio</h4>
                <p>Lorem ipsum dolor sit amet</p>
              </div>
              <p class="time d-none">15.02</p>
            </div>

            <div class="info-contacts d-flex">
              <img src="assets/img/avatar_3.jpg" alt="">
              <div class="name-contacts d-none d-flex">
                <h4>Samuele</h4>
                <p>Lorem ipsum dolor sit amet</p>
              </div>
              <p class="time d-none">14.49</p>
            </div>

            <div class="info-contacts d-flex">
              <img src="assets/img/avatar_4.jpg" alt="">
              <div class="name-contacts d-none d-flex">
                <h4>Alessandro B.</h4>
                <p>Lorem ipsum dolor sit amet</p>
              </div>
              <p class="time d-none">14.33</p>
            </div>

            <div class="info-contacts d-flex">
              <img src="assets/img/avatar_5.jpg" alt="">
              <div class="name-contacts d-none d-flex">
                <h4>Alessandro L.</h4>
                <p>Lorem ipsum dolor sit amet</p>
              </div>
              <p class="time d-none">14.19</p>
            </div> -->

          </div>

        </div>
        

        <!-- colonna grande -->
        <div class="col big d-flex">
          
            <div class="my-info d-flex">
              
              <div class="d-flex">
                <img src="assets/img/avatar_1.jpg" alt="">
                <div class="name-contacts d-flex">
                  <h4>Michele</h4>
                  <p>Ultimo accesso oggi alle 16:26</p>
                </div>
              </div>

              <div class="icons">
                <i class="fa-solid fa-magnifying-glass"></i>
                <i class="fa-solid fa-paperclip"></i>
                <i class="fa-solid fa-ellipsis-vertical"></i>
              </div>
            </div>

            <!-- 2 
              contacts[utenteAttivo].messages: Questo è l'array su cui stai iterando. contacts è un array di contatti, e utenteAttivo è una variabile o una proprietà che indica l'indice del contatto attivo.
              Contacts[utenteAttivo].messages rappresenta l'array dei messaggi del contatto attivo. -->
          <div class="chat"
          v-for="(message, messageIndex) in contacts[utenteAttivo].messages">
            
            <div class="right d-flex"
            v-if="message.status === 'sent'">
              <div class="sent sms-style">
                <div class="options">
                  <i class="fa-solid fa-chevron-down"
                  @click="toggleChevron" ></i>
                  <div class="hide d-flex">
                    <ul class="d-flex">
                      <li>Info messaggi</li>
                      <li @click="cancellaMsg(messageIndex)">Cancella messaggio</li>
                    </ul>
                  </div>
                </div>
                  <p class="write">{{message.message}}</p>
                  <p>{{ message.date }}</p>
               </div>
            </div>
            
            <div class="received sms-style"
            v-if="message.status === 'received'">
              <div class="options">
                <i class="fa-solid fa-chevron-down"></i>
                <div class="hide d-flex">
                  <ul class="d-flex">
                    <li>Info messaggi</li>
                    <li  @click="cancellaMsg(messageIndex)">Cancella messaggio</li>
                  </ul>
                </div>
              </div>
              <p class="write">{{message.message}}</p>
              <p>{{ message.date }}</p>
            </div>
          </div>

          
          <div class="bottom d-flex">
            <i class="fa-regular fa-face-smile"></i>
            <!-- 3 -->
            <input type="text" placeholder="Scrivi un messaggio"
            v-model="newMsg"
            @keyup.enter="addNewMsg">
            <i class="fa-solid fa-microphone"></i>
          </div>
        </div>

      </div>
    </div>
  </section>

  <script src="js/script.js"></script>
</body>
</html>
